<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEOæˆ˜ç•¥å†³ç­–æ™ºèƒ½è®­ç»ƒç³»ç»Ÿ - ååšè‚²å£«(ä¸Šæµ·)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #3a7bd5;
            --secondary: #00d2ff;
            --success: #4CAF50;
            --danger: #F44336;
            --warning: #FFC107;
            --dark: #212121;
            --light: #f5f7fa;
            --hby-orange: #FF6B35;
            --hby-blue: #004E89;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 100%;
            padding: 0;
            position: relative;
        }
        
        .brand-header {
            background: linear-gradient(135deg, var(--hby-blue), var(--hby-orange));
            color: white;
            padding: 15px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .brand-logo {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .brand-logo img {
            height: 30px;
            margin-right: 10px;
        }
        
        .copyright {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .game-header {
            background-color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .game-header h1 {
            color: var(--hby-blue);
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .game-header p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 150px);
        }
        
        .tab-container {
            display: flex;
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: none;
            font-weight: bold;
            color: #666;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            color: var(--hby-orange);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--hby-orange);
        }
        
        .tab-content {
            display: none;
            flex: 1;
            padding: 15px;
            background-color: white;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* æ¨¡æ‹Ÿè®­ç»ƒé¡µæ ·å¼ */
        .company-visual {
            height: 180px;
            background: linear-gradient(to bottom, #f5f7fa, #e0e6eb);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .building {
            width: 70px;
            background: linear-gradient(to bottom, #74b9ff, #0984e3);
            margin: 0 5px;
            position: relative;
            transition: all 0.5s ease;
            border-radius: 5px 5px 0 0;
        }
        
        .main-tower {
            width: 90px;
            background: linear-gradient(to bottom, #fdcb6e, #e17055);
            z-index: 2;
        }
        
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--hby-blue);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: #666;
        }

        /* ä¸ªæ€§åŒ–å­¦ä¹ æ¨èé“¾æ¥æ ·å¼ï¼šé»˜è®¤æ— ä¸‹åˆ’çº¿ï¼Œæ‚¬åœæ—¶æœ‰ï¼ˆé’ˆå¯¹å«.resource-badgeçš„æ¨èé¡¹å†…çš„é“¾æ¥ï¼‰ */
        .recommendation-item a, .resource-item a {
            text-decoration: none;
            color: var(--hby-blue); /* ä¿æŒé“¾æ¥é¢œè‰²ä¸€è‡´ */
        }
        a:hover {
            text-decoration: underline;
        }
        
        .scenario-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 4px solid var(--hby-orange);
        }
        
        .scenario-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .scenario-title i {
            margin-right: 8px;
            color: var(--hby-orange);
        }
        
        .decision-options {
            margin-bottom: 15px;
        }
        
        .option-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--hby-blue), var(--primary));
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(58, 123, 213, 0.2);
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(58, 123, 213, 0.3);
        }
        
        .option-cost {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        /* è¯Šæ–­åˆ†æé¡µæ ·å¼ */
        .diagnosis-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .section-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .weakness-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .weakness-icon {
            width: 30px;
            height: 30px;
            background-color: #FFEEEE;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: var(--danger);
        }
        
        .weakness-text {
            flex: 1;
        }
        
        .weakness-title {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .weakness-desc {
            font-size: 0.8rem;
            color: #666;
        }
        
        .recommendation-card {
            background-color: #F5F9FF;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--hby-blue);
        }
        
        .recommendation-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        .recommendation-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .resource-badge {
            display: inline-block;
            padding: 3px 8px;
            background-color: var(--hby-orange);
            color: white;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-right: 5px;
        }
        
        /* å­¦ä¹ ä¸­å¿ƒæ ·å¼ */
        .knowledge-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .knowledge-category {
            margin-bottom: 15px;
        }
        
        .category-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .category-title i {
            margin-right: 8px;
            color: var(--hby-orange);
        }
        
        .resource-list {
            list-style: none;
        }
        
        .resource-item {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            align-items: center;
        }
        
        .resource-icon {
            margin-right: 10px;
            color: var(--hby-orange);
        }
        
        .progress-container {
            margin-top: 15px;
        }
        
        .progress-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--hby-orange), #FF9E1F);
            border-radius: 4px;
            transition: width 0.5s;
        }
        
        /* æµ‹è¯•é¢˜åº“æ ·å¼ */
        .quiz-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .quiz-question {
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .quiz-options {
            margin-bottom: 15px;
        }
        
        .quiz-option {
            display: block;
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quiz-option:hover {
            background-color: #f5f5f5;
        }
        
        .quiz-option.selected {
            border-color: var(--hby-orange);
            background-color: #FFF5E6;
        }
        
        .quiz-option.correct {
            border-color: var(--success);
            background-color: #E8F5E9;
        }
        
        .quiz-option.incorrect {
            border-color: var(--danger);
            background-color: #FFEBEE;
        }
        
        .quiz-explanation {
            padding: 10px;
            background-color: #F5F9FF;
            border-radius: 6px;
            margin-top: 10px;
            display: none;
        }
        
        .quiz-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .quiz-btn {
    padding: 8px 15px;
    border: none;
    border-radius: 20px;
    background: linear-gradient(135deg, var(--hby-blue), var(--primary));
    color: white;
    font-weight: bold;
    cursor: pointer;
}

/* æ–°å¢ç®€ç­”é¢˜æ ·å¼ */
.essay-answer {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    margin: 10px 0;
}

/* è°ƒæ•´åˆ¤æ–­é¢˜é€‰é¡¹é—´è· */
.judgement-options .quiz-option {
    margin: 10px 0;
    padding: 12px;
}
        
        /* èƒ½åŠ›æ¡£æ¡ˆæ ·å¼ */
        .profile-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .skill-radar {
            height: 250px;
            margin-bottom: 15px;
        }
        
        .skill-level {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .skill-name {
            width: 100px;
            font-size: 0.9rem;
        }
        
        .skill-bar {
            flex: 1;
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .skill-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--hby-orange), #FF9E1F);
            border-radius: 5px;
        }
        
        .skill-value {
            width: 40px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--hby-blue);
        }
        
        /* åé¦ˆå¼¹çª— */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            position: relative;
        }
        
        .modal-title {
            color: var(--hby-blue);
            font-size: 1.2rem;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #999;
        }
        
        .modal-body {
            padding: 15px;
        }
        
        .modal-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            text-align: right;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (min-width: 768px) {
            .game-area {
                flex-direction: row;
                align-items: flex-start;
            }
            
            .tab-container {
                flex-direction: column;
                width: 120px;
                border-bottom: none;
                border-right: 1px solid #e0e0e0;
            }
            
            .tab-btn {
                padding: 15px;
                text-align: left;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .tab-btn.active::after {
                bottom: 0;
                left: auto;
                right: -1px;
                width: 3px;
                height: 100%;
            }
            
            .tab-content {
                flex: 1;
            }
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        /* å¾½ç« æ•ˆæœ */
        .badge {
            display: inline-block;
            padding: 3px 8px;
            background-color: var(--hby-orange);
            color: white;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="brand-header">
            <div class="brand-logo">
                <img src="/static/logo.jpg" alt="ååšè‚²å£«logo" style="width: 40px; height: auto;">
                ååšè‚²å£«(ä¸Šæµ·)
            </div>
            <div class="copyright">Â© 2023 ååšè‚²å£«(ä¸Šæµ·) ç‰ˆæƒæ‰€æœ‰</div>
        </div>
        
        <div class="game-header">
            <h1>CEOæˆ˜ç•¥å†³ç­–æ™ºèƒ½è®­ç»ƒç³»ç»Ÿ</h1>
            <p>ä¸“ä¸šç‰ˆ - æå‡é«˜ç®¡å›¢é˜Ÿæˆ˜ç•¥æ€ç»´ä¸å†³ç­–èƒ½åŠ›</p>
        </div>
        
        <div class="game-area">
            <div class="tab-container">
                <button class="tab-btn active" onclick="switchTab('simulation')">
                    <i>ğŸ¢</i> å•†ä¸šæ¨¡æ‹Ÿ
                </button>
                <button class="tab-btn" onclick="switchTab('diagnosis')">
                    <i>ğŸ”</i> æ™ºèƒ½è¯Šæ–­
                </button>
                <button class="tab-btn" onclick="switchTab('knowledge')">
                    <i>ğŸ“š</i> å­¦ä¹ ä¸­å¿ƒ
                </button>
                <button class="tab-btn" onclick="switchTab('quiz')">
                    <i>âœï¸</i> èƒ½åŠ›æµ‹è¯•
                </button>
                <button class="tab-btn" onclick="switchTab('profile')">
                    <i>ğŸ“Š</i> èƒ½åŠ›æ¡£æ¡ˆ
                </button>
            </div>
            
            <!-- å•†ä¸šæ¨¡æ‹Ÿé¡µ -->
            <div class="tab-content active" id="simulationTab">
                <div class="company-visual" id="companyVisual">
                    <div class="building" style="height: 60px;"></div>
                    <div class="building main-tower" style="height: 100px;"></div>
                    <div class="building" style="height: 50px;"></div>
                </div>
                
                <div class="stats-bar">
                    <div class="stat-card">
                        <div class="stat-value" id="marketShare">32%</div>
                        <div class="stat-label">å¸‚åœºä»½é¢</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="revenue">Â¥1.2B</div>
                        <div class="stat-label">å­£åº¦è¥æ”¶</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="profit">Â¥180M</div>
                        <div class="stat-label">å­£åº¦åˆ©æ¶¦</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="riskIndex">45</div>
                        <div class="stat-label">é£é™©æŒ‡æ•°</div>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="scenario-card">
                    <div class="scenario-title">
                        <i>ğŸ“Œ</i> å½“å‰å•†ä¸šæŒ‘æˆ˜
                    </div>
                    <div class="scenario-text" id="scenarioText">
                        å…¬å¸é¢ä¸´å¸‚åœºä»½é¢è¿ç»­ä¸‰ä¸ªå­£åº¦ä¸‹æ»‘ï¼Œç«äº‰å¯¹æ‰‹æ¨å‡ºäº†é¢ è¦†æ€§äº§å“ï¼Œè‘£äº‹ä¼šè¦æ±‚ç«‹å³é‡‡å–è¡ŒåŠ¨æ‰­è½¬å±€é¢ã€‚ä½œä¸ºCEOï¼Œä½ éœ€è¦å¸¦é¢†é«˜ç®¡å›¢é˜Ÿåšå‡ºå…³é”®æˆ˜ç•¥å†³ç­–ã€‚
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="decision-options">
                    <button class="option-btn" onclick="makeDecision(1)">
                        åŠ å¤§ç ”å‘æŠ•å…¥
                        <span class="option-cost">Â¥15,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(2)">
                        å¹¶è´­ç«äº‰å¯¹æ‰‹
                        <span class="option-cost">Â¥30,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(3)">
                        ä¼˜åŒ–ç°æœ‰äº§å“çº¿
                        <span class="option-cost">Â¥5,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(4)">
                        å¼€æ‹“æ–°å…´å¸‚åœº
                        <span class="option-cost">Â¥20,000,000</span>
                    </button>
                </div>
                
                <div class="scenario-card">
                    <div class="scenario-title">
                        <i>ğŸ“</i> å†³ç­–æ—¥å¿—
                    </div>
                    <div id="decisionLog" style="max-height: 150px; overflow-y: auto;">
                        <!-- å†³ç­–æ—¥å¿—å°†é€šè¿‡JSåŠ¨æ€å¡«å…… -->
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
            </div>
            
            <!-- æ™ºèƒ½è¯Šæ–­é¡µ -->
            <div class="tab-content" id="diagnosisTab">
                <div class="diagnosis-card">
                    <h3 class="section-title">å†³ç­–å¼±ç‚¹è¯Šæ–­</h3>

                    <script>
                        // å­˜å‚¨æœ€è¿‘5æ¬¡å†³ç­–è®°å½•çš„æ•°ç»„
                        let decisionHistory = [];

                        // è®°å½•æ–°å†³ç­–çš„å‡½æ•°ï¼ˆéœ€åœ¨å®é™…å†³ç­–æ“ä½œåè°ƒç”¨ï¼‰
                        function recordDecision(metrics) {
                            decisionHistory.push(metrics);
                            if (decisionHistory.length > 5) decisionHistory.shift(); // ä¿æŒæœ€è¿‘5æ¡
                            updateWeaknessDiagnosis(); // è®°å½•åç«‹å³æ›´æ–°è¯Šæ–­
                        }

                        // æ›´æ–°å¼±ç‚¹è¯Šæ–­å†…å®¹çš„æ ¸å¿ƒå‡½æ•°
                        function updateWeaknessDiagnosis() {
                            // é£é™©æ§åˆ¶ä¸è¶³è¯Šæ–­ï¼ˆç¤ºä¾‹ï¼šç»Ÿè®¡é£é™©æŒ‡æ•°>60çš„æ¬¡æ•°ï¼‰
                            const riskExceedCount = decisionHistory.filter(d => d.riskIndex > 60).length;
                            document.getElementById('riskControlDesc').textContent = `è¿‡å»${decisionHistory.length}æ¬¡å†³ç­–ä¸­æœ‰${riskExceedCount}æ¬¡é£é™©æŒ‡æ•°è¶…è¿‡60ï¼Œæ˜¾ç¤ºé£é™©åå¥½è¾ƒé«˜`;

                            // é•¿æœŸæˆ˜ç•¥ç¼ºå¤±è¯Šæ–­ï¼ˆç¤ºä¾‹ï¼šè®¡ç®—ç ”å‘æŠ•å…¥å¹³å‡å æ¯”ï¼‰
                            const avgRND = decisionHistory.reduce((sum, d) => sum + d.rndRatio, 0) / (decisionHistory.length || 1);
                            document.getElementById('strategyMissingDesc').textContent = `ç ”å‘æŠ•å…¥å æ¯”å¹³å‡ä¸º${(avgRND*100).toFixed(1)}%ï¼Œä½äºè¡Œä¸šæ ‡æ†ä¼ä¸š${(30 - avgRND*100).toFixed(1)}ä¸ªç™¾åˆ†ç‚¹`;

                            // å›¢é˜ŸååŒä¸è¶³è¯Šæ–­ï¼ˆç¤ºä¾‹ï¼šè®¡ç®—ååŒæ•ˆç‡å¹³å‡åˆ†ï¼‰
                            const avgCollab = decisionHistory.reduce((sum, d) => sum + d.collabScore, 0) / (decisionHistory.length || 1);
                            document.getElementById('collaborationDesc').textContent = `è·¨éƒ¨é—¨å†³ç­–æ‰§è¡Œæ•ˆç‡å¹³å‡è¯„åˆ†ä¸º${avgCollab.toFixed(0)}/100`;
                        }
                    </script>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>âš ï¸</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">é£é™©æ§åˆ¶ä¸è¶³</div>
                            <div class="weakness-desc" id="riskControlDesc">è¿‡å»5æ¬¡å†³ç­–ä¸­æœ‰3æ¬¡é£é™©æŒ‡æ•°è¶…è¿‡60ï¼Œæ˜¾ç¤ºé£é™©åå¥½è¾ƒé«˜</div>
                        </div>
                    </div>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>âš ï¸</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">é•¿æœŸæˆ˜ç•¥ç¼ºå¤±</div>
                            <div class="weakness-desc" id="strategyMissingDesc">ç ”å‘æŠ•å…¥å æ¯”ä½äºè¡Œä¸šæ ‡æ†ä¼ä¸š15ä¸ªç™¾åˆ†ç‚¹</div>
                        </div>
                    </div>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>âš ï¸</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">å›¢é˜ŸååŒä¸è¶³</div>
                            <div class="weakness-desc" id="collaborationDesc">è·¨éƒ¨é—¨å†³ç­–æ‰§è¡Œæ•ˆç‡è¯„åˆ†ä»…ä¸º68/100</div>
                        </div>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="recommendation-card">
                    <h3 class="section-title">ä¸ªæ€§åŒ–å­¦ä¹ æ¨è</h3>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">ä¹¦ç±</span>
                        <a href="https://zhuanlan.zhihu.com/p/612603711" target="_blank">ã€Šé»‘å¤©é¹…ï¼šå¦‚ä½•åº”å¯¹ä¸å¯é¢„çŸ¥çš„æœªæ¥ã€‹- çº³è¥¿å§†Â·å°¼å¤æ‹‰æ–¯Â·å¡”å‹’å¸ƒ</a>
                    </div>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">æ–¹æ³•è®º</span>
                        <a href="https://example.com/scenario-planning" target="_blank">æƒ…æ™¯è§„åˆ’è®­ç»ƒï¼šåº”å¯¹ä¸ç¡®å®šæ€§çš„æˆ˜ç•¥å·¥å…·</a>
                    </div>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">è¯¾ç¨‹</span>
                        <a href="https://example.com/risk-management-course" target="_blank">"æˆ˜ç•¥é£é™©ç®¡ç†" - ååšè‚²å£«é«˜ç®¡è¯¾ç¨‹</a>
                    </div>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">å·¥å…·</span>
                        <a href="https://example.com/decision-matrix" target="_blank">é£é™©-æ”¶ç›Šå¹³è¡¡å†³ç­–çŸ©é˜µæ¨¡æ¿</a>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="diagnosis-card">
                    <h3 class="section-title">æ”¹è¿›è®¡åˆ’</h3>
                    <p>åŸºäºæ‚¨çš„å†³ç­–æ¨¡å¼åˆ†æï¼Œå»ºè®®é‡‡å–ä»¥ä¸‹æ”¹è¿›æªæ–½ï¼š</p>
                    <ol style="margin-top: 10px; padding-left: 20px;">
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateProgress()"><span style="margin-left: 8px;">å®Œæˆã€Šé»‘å¤©é¹…ã€‹é˜…è¯»å¹¶æäº¤è¯»ä¹¦ç¬”è®°</span></li>
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateProgress()"><span style="margin-left: 8px;">å‚åŠ æƒ…æ™¯è§„åˆ’å·¥ä½œåŠï¼ˆ2å¤©ï¼‰</span></li>
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateProgress()"><span style="margin-left: 8px;">åœ¨ä¸‹ä¸€è½®æ¨¡æ‹Ÿä¸­æ§åˆ¶é£é™©æŒ‡æ•°åœ¨40-60åŒºé—´</span></li>
                        <li style="display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateProgress()"><span style="margin-left: 8px;">æ¯æœˆå¬å¼€è·¨éƒ¨é—¨æˆ˜ç•¥åè°ƒä¼š</span></li>
                    </ol>

                    <script>
                        function updateProgress() {
                            const checkboxes = document.querySelectorAll('.improvement-checkbox');
                            const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
                            const total = checkboxes.length;
                            const percentage = Math.round((completed / total) * 100);
                            document.querySelector('.progress-title span:last-child').textContent = `${percentage}%`;
                            document.querySelector('.progress-fill').style.width = `${percentage}%`;
                        }

                        function updateDiagnosis() {
                            // è·å–å†³ç­–æ—¥å¿—æ•°æ®ï¼ˆç¤ºä¾‹æ•°æ®ï¼Œéœ€æ ¹æ®å®é™…å†³ç­–é€»è¾‘è°ƒæ•´ï¼‰
                            const decisionLog = document.querySelectorAll('#decisionLog div');
                            const recentDecisions = Array.from(decisionLog).slice(-5);
                            const highRiskCount = recentDecisions.filter(decision => {
                                const riskIndex = parseInt(decision.textContent.match(/é£é™©æŒ‡æ•°ï¼š(\d+)/)?.[1] || 0);
                                return riskIndex > 60;
                            }).length;

                            // æ›´æ–°é£é™©æ§åˆ¶å¼±ç‚¹æè¿°
                            document.getElementById('riskControlDesc').textContent =
                                `è¿‡å»5æ¬¡å†³ç­–ä¸­æœ‰${highRiskCount}æ¬¡é£é™©æŒ‡æ•°è¶…è¿‡60ï¼Œæ˜¾ç¤ºé£é™©åå¥½è¾ƒé«˜`;

                            // ç¤ºä¾‹ï¼šæ›´æ–°é•¿æœŸæˆ˜ç•¥å¼±ç‚¹ï¼ˆéœ€ç»“åˆå®é™…ç ”å‘æ•°æ®ï¼‰
                            const rndInvestment = 25; // å‡è®¾å½“å‰ç ”å‘æŠ•å…¥å æ¯”
                            const benchmark = 40;
                            document.getElementById('strategyMissingDesc').textContent =
                                `ç ”å‘æŠ•å…¥å æ¯”ï¼ˆ${rndInvestment}%ï¼‰ä½äºè¡Œä¸šæ ‡æ†ä¼ä¸šï¼ˆ${benchmark}%ï¼‰${benchmark - rndInvestment}ä¸ªç™¾åˆ†ç‚¹`;

                            // ç¤ºä¾‹ï¼šæ›´æ–°å›¢é˜ŸååŒå¼±ç‚¹ï¼ˆéœ€ç»“åˆå®é™…æ•ˆç‡æ•°æ®ï¼‰
                            const collaborationScore = 75; // å‡è®¾å½“å‰æ•ˆç‡è¯„åˆ†
                            document.getElementById('collaborationDesc').textContent =
                                `è·¨éƒ¨é—¨å†³ç­–æ‰§è¡Œæ•ˆç‡è¯„åˆ†æå‡è‡³${collaborationScore}/100`;
                        }

                        // åœ¨æ¯æ¬¡å†³ç­–åè°ƒç”¨æ›´æ–°è¯Šæ–­
                        function makeDecision(option) {
                            // åŸæœ‰å†³ç­–é€»è¾‘...
                            updateDiagnosis(); // æ–°å¢è°ƒç”¨
                        }
                    </script>
                    
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-title">
                            <span>æ”¹è¿›è®¡åˆ’å®Œæˆåº¦</span>
                            <span>0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
            </div>
            
            <!-- å­¦ä¹ ä¸­å¿ƒé¡µ -->
            <div class="tab-content" id="knowledgeTab">
                <!-- åŠ¨æ€è¿›åº¦å®¹å™¨ï¼Œé€šè¿‡JSæ›´æ–° -->
                <div class="progress-container" data-category="strategy" style="margin: 15px 0;">
                    <div class="progress-title">
                        <span>æˆ˜ç•¥ç®¡ç†</span>
                        <span class="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="progress-container" data-category="change" style="margin: 15px 0;">
                    <div class="progress-title">
                        <span>å˜é©ç®¡ç†</span>
                        <span class="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="progress-container" data-category="risk" style="margin: 15px 0;">
                    <div class="progress-title">
                        <span>é£é™©ç®¡ç†</span>
                        <span class="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="knowledge-card">
                    <h3 class="section-title">æ¨èå­¦ä¹ èµ„æº</h3>
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>ğŸ“–</i> æˆ˜ç•¥ç®¡ç†
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“˜</span>
                                <a href="https://example.com/good-strategy" target="_blank">ã€Šå¥½æˆ˜ç•¥ï¼Œåæˆ˜ç•¥ã€‹- ç†æŸ¥å¾·Â·é²æ¢…å°”ç‰¹</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="strategy" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ§</span>
                                <a href="https://example.com/strategy-audio" target="_blank">"æˆ˜ç•¥æ€ç»´åŸ¹å…»"éŸ³é¢‘è¯¾ç¨‹</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="strategy" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“½ï¸</span>
                                <a href="https://example.com/huawei-case" target="_blank">åä¸ºæˆ˜ç•¥ç®¡ç†å®è·µæ¡ˆä¾‹</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="strategy" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>ğŸ”„</i> å˜é©ç®¡ç†
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“˜</span>
                                <a href="https://example.com/leading-change" target="_blank">ã€Šé¢†å¯¼å˜é©ã€‹- çº¦ç¿°Â·ç§‘ç‰¹</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="change" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“½ï¸</span>
                                <a href="https://example.com/microsoft-case" target="_blank">å¾®è½¯æ•°å­—åŒ–è½¬å‹æ¡ˆä¾‹ç ”ç©¶</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="change" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>ğŸ“ˆ</i> é£é™©ç®¡ç†
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“˜</span>
                                <a href="https://example.com/black-swan" target="_blank">ã€Šé»‘å¤©é¹…ã€‹- çº³è¥¿å§†Â·å¡”å‹’å¸ƒ</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="risk" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">ğŸ“</span>
                                <a href="https://example.com/risk-matrix" target="_blank">é£é™©çŸ©é˜µå·¥å…·æ¨¡æ¿</a>
                                <div style="margin-left: auto; display: flex; align-items: center;">
                                    <span style="margin-right: 0;">æ˜¯å¦å®Œæˆ</span>
                                    <input type="checkbox" class="resource-checkbox" data-category="risk" oninput="updateLearningProgress()" style="margin-left: 0;">
                                </div>
                            </li>
                        </ul>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                

            </div>
            
            <!-- èƒ½åŠ›æµ‹è¯•é¡µ -->
            <div class="tab-content" id="quizTab">
                <div class="quiz-card">
                    <h3 class="section-title">æˆ˜ç•¥å†³ç­–èƒ½åŠ›æµ‹è¯•</h3>
                    <div id="quizContainer" class="quiz-container"></div>  <!-- é¢˜ç›®å®¹å™¨ -->
                    <div class="quiz-actions">
                        <button class="quiz-btn" onclick="submitQuiz()">æäº¤è¯•å·</button>
                    </div>
                </div>
            </div>
            
            <!-- èƒ½åŠ›æ¡£æ¡ˆé¡µ -->
            <div class="tab-content" id="profileTab">
                <div class="profile-card">
                    <h3 class="section-title">æˆ˜ç•¥èƒ½åŠ›è¯„ä¼°</h3>
                    <div class="skill-radar">
                        <canvas id="radarChart"></canvas>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="profile-card">
                    <h3 class="section-title">èƒ½åŠ›æˆé•¿è½¨è¿¹</h3>
                    
                    <div class="skill-level">
                        <div class="skill-name">æˆ˜ç•¥è§†é‡</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 65%"></div>
                        </div>
                        <div class="skill-value">65</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">é£é™©æ§åˆ¶</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 45%"></div>
                        </div>
                        <div class="skill-value">45</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">æ‰§è¡Œæ•ˆç‡</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 72%"></div>
                        </div>
                        <div class="skill-value">72</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">åˆ›æ–°æ€ç»´</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 58%"></div>
                        </div>
                        <div class="skill-value">58</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">å›¢é˜Ÿåä½œ</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 60%"></div>
                        </div>
                        <div class="skill-value">60</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">è´¢åŠ¡æ•é”</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 68%"></div>
                        </div>
                        <div class="skill-value">68</div>
                    </div>



                    <script>
                        // æ–°å¢æŠ½é¢˜é€»è¾‘
                        async function loadQuiz() {
                            try {
                                const response = await fetch('/api/random-questions');
                                const questions = await response.json();
                                renderQuiz(questions);
                            } catch (error) {
                                console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
                                quizContainer.innerHTML = '<div class="error-msg">é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</div>';
                            }
                        }

                        function renderQuiz(questions) {
                            const container = document.getElementById('quizContainer');
                            container.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹
                            
                            questions.forEach((q, index) => {
                                const questionDiv = document.createElement('div');
                                questionDiv.className = 'quiz-question';
                                questionDiv.innerHTML = `
                                    <div class="question-content">${index + 1}. ${q.question_content}</div>
                                    <div class="quiz-options">${renderOptions(q)}</div>
                                    <div class="quiz-explanation" style="display:none;"></div>
                                `;
                                container.appendChild(questionDiv);
                            });
                        }

                        function renderOptions(q) {
                            let optionsHtml = '';
                            if (q.question_type === 'åˆ¤æ–­é¢˜') {
                                optionsHtml = `
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="æ­£ç¡®"> æ­£ç¡®
                                    </label>
                                    <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                        <input type="radio" name="q${q.id}" value="é”™è¯¯"> é”™è¯¯
                                    </label>
                                `;
                            } else {
                                Object.entries(q.options).forEach(([key, value]) => {
                                    optionsHtml += `
                                        <label class="quiz-option" onclick="selectOption(this, ${q.id})">
                                            <input type="radio" name="q${q.id}" value="${key}"> ${value}
                                        </label>
                                    `;
                                });
                            }
                            return optionsHtml;
                        }

                        // åˆå§‹åŒ–åŠ è½½é¢˜ç›®
                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuiz);
                    </script>
                </div>
                
                <div class="profile-card">
                    <h3 class="section-title">èƒ½åŠ›è¯ä¹¦</h3>
                    <p>å®Œæˆä»¥ä¸‹å­¦ä¹ ç›®æ ‡å¯ç”³è¯·ååšè‚²å£«è®¤è¯è¯ä¹¦ï¼š</p>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li style="margin-bottom: 8px;">æ‰€æœ‰æ ¸å¿ƒèƒ½åŠ›è¾¾åˆ°60åˆ†ä»¥ä¸Š</li>
                        <li style="margin-bottom: 8px;">å®Œæˆè‡³å°‘3é—¨æ¨èè¯¾ç¨‹</li>
                        <li style="margin-bottom: 8px;">é€šè¿‡æœ€ç»ˆèƒ½åŠ›è¯„ä¼°</li>
                    </ul>
                    <button class="quiz-btn" style="margin-top: 15px;">ç”³è¯·èƒ½åŠ›è®¤è¯</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åé¦ˆå¼¹çª— -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">å†³ç­–åé¦ˆ</h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body" id="modalFeedbackContent">
                <!-- åé¦ˆå†…å®¹å°†é€šè¿‡JSåŠ¨æ€å¡«å…… -->
            </div>
            <div class="modal-footer">
                <button class="quiz-btn" onclick="closeModal()">ç¡®è®¤</button>
            </div>
        </div>
    </div>
    
    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="positiveSound" src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3" preload="auto"></audio>
    <audio id="negativeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-688.mp3" preload="auto"></audio>
    <audio id="neutralSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" preload="auto"></audio>
    <audio id="envSound" src="https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3" preload="auto"></audio>
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio>

    <script>
        // æ¸¸æˆæ•°æ®
        const gameData = {
            quarter: 1,
            year: 2023,
            budget: 50000000,
            marketShare: 32,
            revenue: 1200000000,
            profit: 180000000,
            riskIndex: 45,
            employeeSatisfaction: 75,
            decisions: [],
            trends: {
                quarters: ["Q1 2023"],
                marketShare: [32],
                revenue: [1200],
                profit: [180],
                risk: [45],
                satisfaction: [75]
            },
            companySize: 3,
            environment: "stable",
            buildings: [],
            skills: {
                vision: 65,
                riskControl: 45,
                execution: 72,
                innovation: 58,
                teamwork: 60,
                finance: 68
            },
            learningProgress: {
                strategy: 40,
                change: 15,
                risk: 25
            }
        };

        // å‰ç«¯è¯·æ±‚æ¥å£
async function loadRandomQuestions() {
    try {
        const response = await fetch('/api/random-questions');
        const questions = await response.json();
        renderQuestions(questions);
    } catch (error) {
        console.error('è·å–é¢˜ç›®å¤±è´¥:', error);
    }
}

// åŠ è½½é¢˜ç›®æ•°æ®
async function loadQuizQuestions() {
    try {
        const response = await fetch('/api/random-questions');
        const questions = await response.json();
        renderQuizQuestions(questions);
    } catch (error) {
        console.error('åŠ è½½é¢˜ç›®å¤±è´¥:', error);
    }
}

// æ¸²æŸ“é¢˜ç›®åˆ°é¡µé¢
function renderQuizQuestions(questions) {
    const container = document.querySelector('#quizTab .quiz-container');
    container.innerHTML = '';  // æ¸…ç©ºæ—§å†…å®¹

    questions.forEach(question => {
        const card = document.createElement('div');
        card.className = 'quiz-card';
        
        // é¢˜ç›®å†…å®¹
        const questionContent = document.createElement('div');
        questionContent.className = 'quiz-question';
        questionContent.textContent = question.question_content;
        card.appendChild(questionContent);

        // é€‰é¡¹æ¸²æŸ“ï¼ˆæ ¹æ®é¢˜å‹ï¼‰
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'quiz-options';
        
        if (question.question_type === 'å•é¡¹é€‰æ‹©é¢˜') {
            Object.entries(question.options).forEach(([key, value]) => {
                const option = document.createElement('label');
                option.className = 'quiz-option';
                option.innerHTML = `
                    <input type="radio" name="q${question.id}" value="${key}">
                    ${key}. ${value}
                `;
                optionsDiv.appendChild(option);
            });
        } else if (question.question_type === 'å¤šé¡¹é€‰æ‹©é¢˜') {
            Object.entries(question.options).forEach(([key, value]) => {
                const option = document.createElement('label');
                option.className = 'quiz-option';
                option.innerHTML = `
                    <input type="checkbox" name="q${question.id}" value="${key}">
                    ${key}. ${value}
                `;
                optionsDiv.appendChild(option);
            });
        } else if (question.question_type === 'åˆ¤æ–­é¢˜') {
            ['æ­£ç¡®', 'é”™è¯¯'].forEach((text, index) => {
                const option = document.createElement('label');
                option.className = 'quiz-option';
                option.innerHTML = `
                    <input type="radio" name="q${question.id}" value="${index === 0 ? 'âˆš' : 'Ã—'}">
                    ${text}
                `;
                optionsDiv.appendChild(option);
            });
        }

        card.appendChild(optionsDiv);

        // è§£æåŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰
        const explanation = document.createElement('div');
        explanation.className = 'quiz-explanation';
        explanation.textContent = `è§£æï¼š${question.explanation}`;
        card.appendChild(explanation);

        container.appendChild(card);
    });
}

        // éŸ³é¢‘å…ƒç´ 
        const positiveSound = document.getElementById('positiveSound');
        const negativeSound = document.getElementById('negativeSound');
        const neutralSound = document.getElementById('neutralSound');
        const envSound = document.getElementById('envSound');
        const successSound = document.getElementById('successSound');

        // å›¾è¡¨å®ä¾‹
        let trendChart, radarChart;
        
        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            updateBuildings();
            updateUI();
            updateDecisionLog();
            
            // åŠ è½½é¢˜ç›®
            loadRandomQuestions();
            
            // éšæœºç¯å¢ƒå˜åŒ–
            setInterval(randomEnvironmentChange, 20000);
        });

        // åˆå§‹åŒ–å›¾è¡¨
        function initCharts() {
            // é›·è¾¾å›¾
            const radarCtx = document.getElementById('radarChart').getContext('2d');
            radarChart = new Chart(radarCtx, {
                type: 'radar',
                data: {
                    labels: ['æˆ˜ç•¥è§†é‡', 'é£é™©æ§åˆ¶', 'æ‰§è¡Œæ•ˆç‡', 'åˆ›æ–°æ€ç»´', 'å›¢é˜Ÿåä½œ', 'è´¢åŠ¡æ•é”'],
                    datasets: [{
                        label: 'èƒ½åŠ›è¯„ä¼°',
                        data: [
                            gameData.skills.vision,
                            gameData.skills.riskControl,
                            gameData.skills.execution,
                            gameData.skills.innovation,
                            gameData.skills.teamwork,
                            gameData.skills.finance
                        ],
                        backgroundColor: 'rgba(58, 123, 213, 0.2)',
                        borderColor: 'rgba(58, 123, 213, 1)',
                        pointBackgroundColor: 'rgba(58, 123, 213, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(58, 123, 213, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(0,0,0,0.1)'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabId) {
    // æ›´æ–°æ ‡ç­¾æŒ‰é’®çŠ¶æ€
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`.tab-btn[onclick="switchTab('${tabId}')"]`).classList.add('active');
    
    // æ›´æ–°å†…å®¹æ˜¾ç¤º
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.getElementById(`${tabId}Tab`).classList.add('active');
    
    // å¦‚æœæ˜¯èƒ½åŠ›æ¡£æ¡ˆé¡µï¼Œæ›´æ–°é›·è¾¾å›¾
    if (tabId === 'profile') {
        updateRadarChart();
    }
    // åˆ‡æ¢åˆ°èƒ½åŠ›æµ‹è¯•æ—¶åŠ è½½é¢˜ç›®
    if (tabId === 'quiz') {
        loadQuizQuestions();
    }
}

        // åšå‡ºå†³ç­–
        function makeDecision(option) {
            // æ ¹æ®å†³ç­–æ›´æ–°æ¸¸æˆçŠ¶æ€
            const result = updateGameState(option);
            
            // æ˜¾ç¤ºåé¦ˆ
            showFeedback(option, result);
            
            // è¿›å…¥ä¸‹ä¸€å­£åº¦
            nextQuarter();
            
            // æ›´æ–°UI
            updateUI();
            
            // æ›´æ–°å†³ç­–æ—¥å¿—
            updateDecisionLog();
            
            // æ’­æ”¾éŸ³æ•ˆ
            playFeedbackSound(result.effect);
            
            // æ›´æ–°èƒ½åŠ›å€¼
            updateSkills(option, result);
        }

        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        function updateGameState(option) {
            let marketShareChange = 0;
            let revenueChange = 0;
            let profitChange = 0;
            let riskChange = 0;
            let satisfactionChange = 0;
            let cost = 0;
            let effect = 'neutral'; // positive, negative, neutral
            let feedback = '';
            
            // ç¯å¢ƒå½±å“å› å­
            let envFactor = 1;
            if (gameData.environment === 'growth') envFactor = 1.2;
            if (gameData.environment === 'recession') envFactor = 0.8;
            
            switch(option) {
                case 1: // åŠ å¤§ç ”å‘æŠ•å…¥
                    cost = 15000000;
                    marketShareChange = (-2 + Math.random() * 6) * envFactor;
                    revenueChange = (-5 + Math.random() * 10) * envFactor;
                    profitChange = (-15 + Math.random() * 10) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º-15~-5
                    riskChange = (10 + Math.random() * 10) * envFactor;
                    satisfactionChange = (3 + Math.random() * 4) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º3~7
                    feedback = "ç ”å‘æŠ•å…¥å°†å¢å¼ºé•¿æœŸç«äº‰åŠ›ï¼Œä½†çŸ­æœŸåˆ©æ¶¦å‹åŠ›å¢å¤§ã€‚";
                    effect = marketShareChange > 2 ? 'positive' : (profitChange < -15 ? 'negative' : 'neutral');
                    break;
                case 2: // å¹¶è´­ç«äº‰å¯¹æ‰‹
                    cost = 30000000;
                    marketShareChange = (3 + Math.random() * 8) * envFactor;
                    revenueChange = (10 + Math.random() * 20) * envFactor;
                    profitChange = (-20 + Math.random() * 15) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º-20~-5
                    riskChange = (20 + Math.random() * 15) * envFactor;
                    satisfactionChange = (-8 + Math.random() * 12) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º-8~4
                    feedback = "å¹¶è´­å¿«é€Ÿæ‰©å¤§äº†å¸‚åœºä»½é¢ï¼Œä½†æ•´åˆæŒ‘æˆ˜ä¸å®¹å¿½è§†ã€‚";
                    effect = marketShareChange > 5 ? 'positive' : (profitChange < -20 ? 'negative' : 'neutral');
                    break;
                case 3: // ä¼˜åŒ–ç°æœ‰äº§å“çº¿
                    cost = 5000000;
                    marketShareChange = (-3 + Math.random() * 4) * envFactor;
                    revenueChange = (-5 + Math.random() * 5) * envFactor;
                    profitChange = (10 + Math.random() * 8) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º10~18
                    riskChange = (-5 + Math.random() * 5) * envFactor;
                    satisfactionChange = (-10 + Math.random() * 8) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º-10~-2
                    feedback = "æˆæœ¬å‰Šå‡æ”¹å–„äº†çŸ­æœŸåˆ©æ¶¦ï¼Œä½†å¯èƒ½å½±å“å‘˜å·¥å£«æ°”ã€‚";
                    effect = profitChange > 15 ? 'positive' : (satisfactionChange < -10 ? 'negative' : 'neutral');
                    break;
                case 4: // å¼€æ‹“æ–°å…´å¸‚åœº
                    cost = 20000000;
                    marketShareChange = (1 + Math.random() * 10) * envFactor;
                    revenueChange = (5 + Math.random() * 25) * envFactor;
                    profitChange = (-8 + Math.random() * 14) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º-8~6
                    riskChange = (15 + Math.random() * 10) * envFactor;
                    satisfactionChange = (2 + Math.random() * 6) * envFactor; // è°ƒæ•´æ³¢åŠ¨èŒƒå›´ä¸º2~8
                    feedback = "æ–°å…´å¸‚åœºå¸¦æ¥å¢é•¿æœºä¼šï¼Œä½†åˆæœŸæŠ•å…¥è¾ƒå¤§ã€‚";
                    effect = revenueChange > 15 ? 'positive' : (profitChange < -10 ? 'negative' : 'neutral');
                    break;
            }
            
            // åº”ç”¨å˜åŒ–
            gameData.budget -= cost;
            gameData.marketShare = Math.max(5, Math.min(100, gameData.marketShare + marketShareChange));
            gameData.revenue = Math.max(200000000, gameData.revenue * (1 + revenueChange/100));
            gameData.profit = Math.max(0, gameData.profit * (1 + profitChange/100));
            gameData.riskIndex = Math.max(10, Math.min(100, gameData.riskIndex + riskChange));
            gameData.employeeSatisfaction = Math.max(30, Math.min(100, gameData.employeeSatisfaction + satisfactionChange));
            
            // æ›´æ–°å…¬å¸è§„æ¨¡ (æ ¹æ®è¥æ”¶å¢é•¿)
            const growthFactor = (gameData.revenue / 1200000000) - 1; // ç›¸å¯¹äºåˆå§‹1.2Bçš„å¢é•¿
            gameData.companySize = Math.max(1, Math.min(10, Math.floor(3 + growthFactor * 5)));
            
            // è®°å½•å†³ç­–
            const decision = {
                quarter: `Q${gameData.quarter} ${gameData.year}`,
                option: option,
                marketShareChange: marketShareChange,
                revenueChange: revenueChange,
                profitChange: profitChange,
                riskChange: riskChange,
                effect: effect
            };
            gameData.decisions.push(decision);
            
            return {
                effect: effect,
                feedback: feedback,
                marketShareChange: marketShareChange,
                revenueChange: revenueChange,
                profitChange: profitChange,
                riskChange: riskChange,
                satisfactionChange: satisfactionChange
            };
        }

        // æ›´æ–°èƒ½åŠ›å€¼
        function updateSkills(option, result) {
            // æ ¹æ®å†³ç­–ç±»å‹å’Œèƒ½åŠ›å½±å“æ›´æ–°æŠ€èƒ½å€¼
            switch(option) {
                case 1: // ç ”å‘æŠ•å…¥
                    gameData.skills.innovation = Math.min(100, gameData.skills.innovation + 2);
                    gameData.skills.vision = Math.min(100, gameData.skills.vision + 1);
                    gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 1);
                    break;
                case 2: // å¹¶è´­
                    gameData.skills.execution = Math.min(100, gameData.skills.execution + 1);
                    gameData.skills.finance = Math.min(100, gameData.skills.finance + 1);
                    gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 2);
                    break;
                case 3: // ä¼˜åŒ–
                    gameData.skills.finance = Math.min(100, gameData.skills.finance + 2);
                    gameData.skills.teamwork = Math.max(0, gameData.skills.teamwork - 1);
                    break;
                case 4: // æ–°å…´å¸‚åœº
                    gameData.skills.vision = Math.min(100, gameData.skills.vision + 2);
                    gameData.skills.riskControl = Math.min(100, gameData.skills.riskControl + 1);
                    break;
            }
            
            // æ ¹æ®ç»“æœè°ƒæ•´èƒ½åŠ›å€¼
            if (result.effect === 'positive') {
                gameData.skills.execution = Math.min(100, gameData.skills.execution + 1);
                gameData.skills.teamwork = Math.min(100, gameData.skills.teamwork + 1);
            } else if (result.effect === 'negative') {
                gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 1);
            }
            
            // æ›´æ–°å­¦ä¹ è¿›åº¦
            if (option === 1 || option === 4) {
                gameData.learningProgress.strategy = Math.min(100, gameData.learningProgress.strategy + 5);
            }
            if (option === 2) {
                gameData.learningProgress.change = Math.min(100, gameData.learningProgress.change + 5);
            }
            if (option === 3) {
                gameData.learningProgress.risk = Math.min(100, gameData.learningProgress.risk + 5);
            }
        }

        // è¿›å…¥ä¸‹ä¸€å­£åº¦
        function nextQuarter() {
            gameData.quarter++;
            if (gameData.quarter > 4) {
                gameData.quarter = 1;
                gameData.year++;
                
                // æ¯å¹´éšæœºç¯å¢ƒå˜åŒ–
                randomEnvironmentChange(true);
                
                // æ¯å¹´ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š
                if (gameData.year > 2023) {
                    setTimeout(() => {
                        showAnnualReport();
                    }, 1000);
                }
            }
            
            // æ›´æ–°è¶‹åŠ¿æ•°æ®
            gameData.trends.quarters.push(`Q${gameData.quarter} ${gameData.year}`);
            gameData.trends.marketShare.push(Math.round(gameData.marketShare));
            gameData.trends.revenue.push(Math.round(gameData.revenue / 1000000));
            gameData.trends.profit.push(Math.round(gameData.profit / 1000000));
            gameData.trends.risk.push(Math.round(gameData.riskIndex));
            gameData.trends.satisfaction.push(Math.round(gameData.employeeSatisfaction));
            
            // æ›´æ–°å…¬å¸å»ºç­‘
            updateBuildings();
        }

        // æ›´æ–°UI
        function updateUI() {
            document.getElementById('marketShare').textContent = `${Math.round(gameData.marketShare)}%`;
            document.getElementById('revenue').textContent = `Â¥${formatNumber(gameData.revenue)}`;
            document.getElementById('profit').textContent = `Â¥${formatNumber(gameData.profit)}`;
            document.getElementById('riskIndex').textContent = Math.round(gameData.riskIndex);
            
            // æ›´æ–°æƒ…æ™¯æ–‡æœ¬
            updateScenarioText();
        }

        // æ›´æ–°å…¬å¸å»ºç­‘å¯è§†åŒ–
        function updateBuildings() {
            const companyVisual = document.getElementById('companyVisual');
            
            // æ¸…é™¤ç°æœ‰å»ºç­‘
            companyVisual.innerHTML = '';
            gameData.buildings = [];
            
            // åˆ›å»ºæ–°å»ºç­‘
            const buildingCount = Math.max(3, Math.min(7, gameData.companySize));
            const mainTowerIndex = Math.floor(buildingCount / 2);
            
            for (let i = 0; i < buildingCount; i++) {
                const isMainTower = i === mainTowerIndex;
                const height = isMainTower ? 
                    80 + (gameData.companySize * 10) : 
                    40 + (gameData.companySize * 5) + (Math.random() * 20 - 10);
                
                const building = document.createElement('div');
                building.className = `building ${isMainTower ? 'main-tower' : ''}`;
                building.style.height = `${height}px`;
                
                // åˆ›å»ºçª—æˆ·
                const windowCount = Math.floor(height / 15) * 2;
                const windows = document.createElement('div');
                windows.className = 'building-windows';
                
                for (let j = 0; j < windowCount; j++) {
                    const window = document.createElement('div');
                    window.className = 'window';
                    windows.appendChild(window);
                }
                
                building.appendChild(windows);
                companyVisual.appendChild(building);
                gameData.buildings.push(building);
                
                // éšæœºç‚¹äº®çª—æˆ·
                setTimeout(() => {
                    const windowElements = building.querySelectorAll('.window');
                    windowElements.forEach(w => {
                        if (Math.random() > 0.3) { // 70%çš„çª—æˆ·äº®ç€
                            w.style.backgroundColor = '#ffeaa7';
                            w.style.boxShadow = '0 0 5px #ffeaa7';
                        }
                    });
                }, 100);
            }
            
            // å¦‚æœå…¬å¸è§„æ¨¡å¾ˆå¤§ï¼Œæ˜¾ç¤ºåº†ç¥æ•ˆæœ
            if (gameData.companySize >= 8) {
                showCelebration();
            }
        }

        // æ›´æ–°å†³ç­–æ—¥å¿—
        function updateDecisionLog() {
            const logContainer = document.getElementById('decisionLog');
            logContainer.innerHTML = '';
            
            // åªæ˜¾ç¤ºæœ€è¿‘5æ¡å†³ç­–
            const recentDecisions = gameData.decisions.slice(-5).reverse();
            
            recentDecisions.forEach(decision => {
                const logEntry = document.createElement('div');
                logEntry.style.padding = '5px 0';
                logEntry.style.borderBottom = '1px solid #f0f0f0';
                
                const optionName = getOptionName(decision.option);
                const effectIcon = decision.effect === 'positive' ? 'âœ…' : decision.effect === 'negative' ? 'âŒ' : 'â–';
                
                logEntry.innerHTML = `
                    <strong>${decision.quarter}</strong>: ${optionName} 
                    <span style="float: right;">${effectIcon}</span>
                    <div style="font-size: 0.8rem; color: #666;">
                        å¸‚åœºä»½é¢: ${decision.marketShareChange > 0 ? '+' : ''}${decision.marketShareChange.toFixed(1)}% | 
                        é£é™©æŒ‡æ•°: ${decision.riskChange > 0 ? '+' : ''}${decision.riskChange.toFixed(1)}
                    </div>
                `;
                
                logContainer.appendChild(logEntry);
            });
        }

        // æ›´æ–°é›·è¾¾å›¾
        function updateRadarChart() {
            radarChart.data.datasets[0].data = [
                gameData.skills.vision,
                gameData.skills.riskControl,
                gameData.skills.execution,
                gameData.skills.innovation,
                gameData.skills.teamwork,
                gameData.skills.finance
            ];
            radarChart.update();
        }

        // éšæœºç¯å¢ƒå˜åŒ–
        function randomEnvironmentChange(isAnnual = false) {
            if (Math.random() > 0.5 || isAnnual) {
                const environments = [
                    { type: "stable", name: "ç¨³å®š", message: "ç»æµç¯å¢ƒå›å½’ç¨³å®šçŠ¶æ€" },
                    { type: "growth", name: "å¢é•¿", message: "ç»æµè¿›å…¥å¢é•¿æœŸï¼å¸‚åœºéœ€æ±‚æ—ºç››" },
                    { type: "recession", name: "è¡°é€€", message: "ç»æµè¡°é€€å¼€å§‹ï¼Œå¸‚åœºæ”¶ç¼©" }
                ];
                
                const newEnv = environments[Math.floor(Math.random() * environments.length)];
                if (newEnv.type !== gameData.environment) {
                    gameData.environment = newEnv.type;
                    
                    // æ˜¾ç¤ºç¯å¢ƒå˜åŒ–æç¤º
                    const envChange = document.getElementById('envChange');
                    envChange.textContent = newEnv.message;
                    envChange.style.display = 'block';
                    
                    // æ’­æ”¾ç¯å¢ƒå˜åŒ–éŸ³æ•ˆ
                    envSound.play();
                    
                    // 3ç§’åéšè—æç¤º
                    setTimeout(() => {
                        envChange.style.display = 'none';
                    }, 3000);
                    
                    // æ·»åŠ åˆ°å†³ç­–æ—¥å¿—
                    const logEntry = document.createElement('div');
                    logEntry.style.padding = '5px 0';
                    logEntry.style.color = newEnv.type === 'growth' ? '#4CAF50' : newEnv.type === 'recession' ? '#F44336' : '#2196F3';
                    logEntry.innerHTML = `<strong>ç¯å¢ƒå˜åŒ–</strong>: ${newEnv.message}`;
                    document.getElementById('decisionLog').prepend(logEntry);
                }
            }
        }

        // æ˜¾ç¤ºåé¦ˆå¼¹çª—
        function showFeedback(option, result) {
            const modal = document.getElementById('feedbackModal');
            const content = document.getElementById('modalFeedbackContent');
            
            let fullFeedback = result.feedback;
            
            // æ·»åŠ ç¯å¢ƒå½±å“çš„è¯´æ˜
            if (gameData.environment === 'growth') {
                fullFeedback += "<br><br>ç»æµå¤„äºå¢é•¿æœŸï¼Œå¸‚åœºå¯¹åˆ›æ–°ä¸¾æªååº”ç§¯æï¼";
            } else if (gameData.environment === 'recession') {
                fullFeedback += "<br><br>ç»æµè¡°é€€å½±å“äº†å†³ç­–æ•ˆæœï¼Œæ¶ˆè´¹è€…æ”¯å‡ºå‡å°‘ã€‚";
            }
            
            // æ·»åŠ å…·ä½“æ•°æ®å˜åŒ–
            fullFeedback += `<br><br><strong>å½±å“ç»“æœ:</strong>
                <br>â€¢ å¸‚åœºä»½é¢: ${result.marketShareChange > 0 ? '+' : ''}${result.marketShareChange.toFixed(1)}%
                <br>â€¢ è¥æ”¶: ${result.revenueChange > 0 ? '+' : ''}${result.revenueChange.toFixed(1)}%
                <br>â€¢ åˆ©æ¶¦: ${result.profitChange > 0 ? '+' : ''}${result.profitChange.toFixed(1)}%
                <br>â€¢ é£é™©æŒ‡æ•°: ${result.riskChange > 0 ? '+' : ''}${result.riskChange.toFixed(1)}`;
            
            // æ·»åŠ èƒ½åŠ›æå‡æç¤º
            if (option === 1 || option === 4) {
                fullFeedback += "<br><br><strong>èƒ½åŠ›æå‡:</strong> æˆ˜ç•¥è§†é‡ +1ï¼Œåˆ›æ–°æ€ç»´ +2";
            } else if (option === 2) {
                fullFeedback += "<br><br><strong>èƒ½åŠ›æå‡:</strong> æ‰§è¡Œæ•ˆç‡ +1ï¼Œè´¢åŠ¡æ•é” +1";
            }
            
            content.innerHTML = fullFeedback;
            modal.style.display = 'flex';
        }

        // æ˜¾ç¤ºå¹´åº¦æŠ¥å‘Š
        function showAnnualReport() {
            const modal = document.getElementById('feedbackModal');
            const content = document.getElementById('modalFeedbackContent');
            
            let report = `<h3 style="color: var(--hby-orange); margin-bottom: 10px;">${gameData.year-1}å¹´åº¦æˆ˜ç•¥å†³ç­–æŠ¥å‘Š</h3>`;
            
            // å¹´åº¦æ€»ç»“
            const revenueGrowth = ((gameData.revenue - 1200000000) / 1200000000 * 100).toFixed(1);
            const profitGrowth = ((gameData.profit - 180000000) / 180000000 * 100).toFixed(1);
            
            report += `<p><strong>å¹´åº¦ä¸šç»©:</strong>
                <br>â€¢ è¥æ”¶å¢é•¿: ${revenueGrowth > 0 ? '+' : ''}${revenueGrowth}%
                <br>â€¢ åˆ©æ¶¦å¢é•¿: ${profitGrowth > 0 ? '+' : ''}${profitGrowth}%
                <br>â€¢ å¹³å‡é£é™©æŒ‡æ•°: ${calculateAverage(gameData.trends.risk).toFixed(1)}</p>`;
            
            // å†³ç­–åˆ†æ
            report += `<p><strong>å†³ç­–æ¨¡å¼åˆ†æ:</strong>`;
            
            const riskDecisions = gameData.decisions.filter(d => d.option === 2 || d.option === 4).length;
            if (riskDecisions > 3) {
                report += "<br>â€¢ é«˜é£é™©å†³ç­–å æ¯”è¿‡é«˜ï¼Œå»ºè®®åŠ å¼ºé£é™©è¯„ä¼°";
            }
            
            const profitFocus = gameData.decisions.filter(d => d.option === 3).length;
            if (profitFocus > 2) {
                report += "<br>â€¢ è¿‡åº¦å…³æ³¨çŸ­æœŸåˆ©æ¶¦ï¼Œå¯èƒ½å½±å“é•¿æœŸç«äº‰åŠ›";
            }
            
            // èƒ½åŠ›å‘å±•å»ºè®®
            report += `<p><strong>èƒ½åŠ›å‘å±•å»ºè®®:</strong>
                <br>â€¢ å½“å‰é£é™©æ§åˆ¶èƒ½åŠ›: ${gameData.skills.riskControl}/100
                <br>â€¢ å»ºè®®å®Œæˆé£é™©ç®¡ç†è¯¾ç¨‹å’Œæƒ…æ™¯è§„åˆ’è®­ç»ƒ</p>`;
            
            content.innerHTML = report;
            modal.style.display = 'flex';
        }

        // è®¡ç®—å¹³å‡å€¼
        function calculateAverage(arr) {
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('feedbackModal').style.display = 'none';
        }

        // æ’­æ”¾åé¦ˆéŸ³æ•ˆ
        function playFeedbackSound(type) {
            switch(type) {
                case 'positive':
                    positiveSound.play();
                    break;
                case 'negative':
                    negativeSound.play();
                    break;
                default:
                    neutralSound.play();
            }
        }

        // æ˜¾ç¤ºåº†ç¥æ•ˆæœ
        function showCelebration() {
            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
            successSound.play();
            
            // åˆ›å»ºå½©è‰²çº¸å±‘æ•ˆæœ
            for (let i = 0; i < 30; i++) {
                createConfetti();
            }
        }

        // åˆ›å»ºå½©è‰²çº¸å±‘
        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            
            // éšæœºé¢œè‰²
            const colors = ['#FF6B35', '#004E89', '#4CAF50', '#FFC107', '#9C27B0'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = randomColor;
            
            // éšæœºä½ç½®
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.width = `${5 + Math.random() * 10}px`;
            confetti.style.height = `${5 + Math.random() * 10}px`;
            
            // éšæœºåŠ¨ç”»å»¶è¿Ÿ
            confetti.style.animationDelay = `${Math.random() * 0.5}s`;
            
            document.body.appendChild(confetti);
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤
            setTimeout(() => {
                confetti.remove();
            }, 3000);
        }

        // æ›´æ–°æƒ…æ™¯æ–‡æœ¬
        function updateScenarioText() {
            const scenarios = [
                "å…¬å¸é¢ä¸´å¸‚åœºä»½é¢è¿ç»­ä¸‰ä¸ªå­£åº¦ä¸‹æ»‘ï¼Œç«äº‰å¯¹æ‰‹æ¨å‡ºäº†é¢ è¦†æ€§äº§å“ï¼Œè‘£äº‹ä¼šè¦æ±‚ç«‹å³é‡‡å–è¡ŒåŠ¨æ‰­è½¬å±€é¢ã€‚",
                "ç»æµç¯å¢ƒä¸ç¡®å®šæ€§å¢åŠ ï¼ŒæŠ•èµ„è€…å¯¹å…¬å¸å¢é•¿å‰æ™¯è¡¨ç¤ºæ‹…å¿§ï¼Œè¦æ±‚æ›´æ¸…æ™°çš„æˆ˜ç•¥è·¯çº¿å›¾ã€‚",
                "å…³é”®æŠ€æœ¯äººæ‰è¢«ç«äº‰å¯¹æ‰‹æŒ–è§’ï¼ŒåŒæ—¶æ–°äº§å“å¼€å‘è¿›åº¦è½åäºè®¡åˆ’ã€‚",
                "ç›‘ç®¡ç¯å¢ƒå‘ç”Ÿå˜åŒ–ï¼Œå½±å“äº†å…¬å¸æ ¸å¿ƒä¸šåŠ¡çš„ç›ˆåˆ©æ¨¡å¼ï¼Œéœ€è¦æˆ˜ç•¥è°ƒæ•´ã€‚",
                "å…¬å¸æˆåŠŸä¸Šå¸‚åï¼Œé¢ä¸´æ›´å¤§çš„ä¸šç»©å‹åŠ›å’Œå…¬ä¼—ç›‘ç£ï¼Œéœ€è¦å¹³è¡¡çŸ­æœŸç›®æ ‡ä¸é•¿æœŸæˆ˜ç•¥ã€‚",
                "æ–°å…´æŠ€æœ¯å´›èµ·å¯èƒ½é¢ è¦†è¡Œä¸šï¼Œå…¬å¸éœ€è¦å†³å®šæ˜¯å¼•é¢†å˜é©è¿˜æ˜¯å·©å›ºç°æœ‰ä¼˜åŠ¿ã€‚",
                "å…¨çƒä¾›åº”é“¾ä¸­æ–­å¯¼è‡´ç”Ÿäº§æˆæœ¬ä¸Šå‡ï¼Œéœ€è¦é‡æ–°è¯„ä¼°ç”Ÿäº§å’Œåˆ†é”€ç­–ç•¥ã€‚",
                "ä¸»è¦å®¢æˆ·è¦æ±‚å¤§å¹…é™ä»·ï¼Œå¦åˆ™å°†è½¬å‘ç«äº‰å¯¹æ‰‹ï¼Œé¢ä¸´åˆ©æ¶¦ç‡å‹åŠ›ã€‚"
            ];
            
            const randomScenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            document.getElementById('scenarioText').textContent = randomScenario;
        }

        // è·å–å†³ç­–é€‰é¡¹åç§°
        function getOptionName(option) {
            switch(option) {
                case 1: return 'ç ”å‘æŠ•å…¥';
                case 2: return 'å¹¶è´­';
                case 3: return 'ä¼˜åŒ–äº§å“';
                case 4: return 'æ–°å…´å¸‚åœº';
                default: return 'æœªçŸ¥';
            }
        }

        // é€‰æ‹©é¢˜é€‰é¡¹é€‰æ‹©
        function selectOption(element) {
            // ç§»é™¤åŒé¢˜ç›®å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('selected');
            });
            // æ·»åŠ å½“å‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            element.classList.add('selected');
        }
        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šéªŒè¯ç­”æ¡ˆå¹¶ç»™å‡ºåé¦ˆ
            alert("ç­”æ¡ˆå·²æäº¤ï¼ç³»ç»Ÿå°†è®°å½•æ‚¨çš„å­¦ä¹ è¿›åº¦ã€‚");
        }

        // æ˜¾ç¤ºè§£æ
        function showExplanation(id) {
            const explanation = document.getElementById(id);
            if (explanation.style.display === 'none') {
                explanation.style.display = 'block';
            } else {
                explanation.style.display = 'none';
            }
        }

        // æ ¼å¼åŒ–æ•°å­—æ˜¾ç¤º
        function formatNumber(num) {
            if (num >= 100000000) {
                return (num / 100000000).toFixed(1) + 'äº¿';
            } else if (num >= 10000) {
                return (num / 10000).toFixed(1) + 'ä¸‡';
            }
            return num.toLocaleString();
        }
    </script>
</body>
</html>